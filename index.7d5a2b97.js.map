{"mappings":"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","sources":["src/js/home-library.js"],"sourcesContent":["'use strict';\nimport { fetchVideo } from './fetch-video';\nimport { fetchVideoPopular } from './fetch-video';\nimport { fetchDetails } from './fetch-video';\nimport { fetchGenres } from './fetch-video';\nimport { renderModal } from './more-info-modal';\n\n// const form = document.querySelector('#search-form');\nconst form = document.querySelector('#header-search-form');\nconst gallery = document.querySelector('.home-gallery');\nconst paginationBtns = document.querySelectorAll('.pag-btns__btn');\nconst nextBtn = document.querySelector('.pag-btns__arrow--next');\nconst prevBtn = document.querySelector('.pag-btns__arrow--prev');\nconst dots = document.querySelectorAll('.pag-btns__dots');\nlet pageNumber = 1;\n\nconsole.log(paginationBtns);\nconsole.log(typeof paginationBtns);\n\n// funkcja do wyświetlania wyszukanych filmów\nconst renderVideoCard = videoArray => {\n  fetchGenres()\n    .then(genresList => {\n      videoArray.map(video => {\n        const releaseDate = video.release_date;\n        const movieYear = releaseDate.split('-');\n\n        const arrGenreId = video.genre_ids;\n        const arrVideoGenres = [];\n        arrGenreId.map(id => {\n          const genreObj = genresList.genres.find(genre => genre.id === id);\n          arrVideoGenres.push(genreObj);\n        });\n        const arrGenres = [];\n        arrVideoGenres.map(genre => {\n          arrGenres.push(genre.name);\n        });\n        const genres = arrGenres.join(', ');\n\n        const card = document.createElement('div');\n        card.classList.add(\"home-gallery__card\");\n        card.setAttribute(\"movieid\", video.id);\n        card.innerHTML = `<div class=\"home-gallery__label\">\n        <p class=\"home-gallery__label-text\">Click for more details</p>\n      </div><img class=\"home-gallery__img\" src=\"https://image.tmdb.org/t/p/w300${video.poster_path}\" alt =\"video poster\"><div class=\"home-gallery__signature\"><h3 class= \"home-gallery__title\">${video.title}</h3><p class = \"home-gallery__details\">${genres} | ${movieYear[0]}</p></div>`;\n\n        gallery.appendChild(card);\n      });\n    })\n    .catch(err => {\n      console.error(err);\n    });\n};\n\n// funkcja sprawdzająca ilość wyszukanych elementów oraz stron i obsługująca widoczność przycisków do przewijania stron\nconst checkResult = totalResults => {\n  const totalPages = Math.ceil(totalResults / 20);\n\n  for (let i = 0; i <= 6; i++) {\n    paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n  }\n  nextBtn.classList.add('pag-btns__arrow--is-hidden');\n  prevBtn.classList.add('pag-btns__arrow--is-hidden');\n  dots[0].classList.add('pag-btns__dots--is-hidden');\n  dots[1].classList.add('pag-btns__dots--is-hidden');\n\n  nextBtn.disabled = false;\n  prevBtn.disabled = false;\n\n  if (totalResults === 0) {\n    // tutaj usuwam klase is-hidden w komentarzu wrzuconym do hedera przez Olgę, że nie znaleziono filmów\n    return;\n  }\n\n  paginationBtns.forEach(btn => {\n    if (Number(btn.textContent) !== pageNumber) {\n      // btn.classList.remove('.pag-btns__btn--active');\n      btn.style.backgroundColor = 'transparent';\n      console.log('remove');\n    }\n    if (Number(btn.textContent) === pageNumber) {\n      // btn.classList.add('.pag-btns__btn--active');\n      btn.style.backgroundColor = 'orange';\n      console.log('add');\n    }\n  });\n\n  if (totalPages === 1) {\n    paginationBtns[0].classList.remove('pag-btns__btn--is-hidden');\n    paginationBtns[0].disabled = true;\n    // tutaj można jeszcze usunąć cursor pointer\n  } else if (totalPages === 2) {\n    paginationBtns[0].classList.remove('pag-btns__btn--is-hidden');\n    paginationBtns[1].classList.remove('pag-btns__btn--is-hidden');\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 3) {\n    for (let i = 0; i <= 2; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 4) {\n    for (let i = 0; i <= 3; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 5) {\n    for (let i = 0; i <= 4; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 6) {\n    for (let i = 0; i <= 5; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 7) {\n    for (let i = 0; i <= 6; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages > 7) {\n    dots[0].classList.remove('pag-btns__dots--is-hidden');\n    dots[1].classList.remove('pag-btns__dots--is-hidden');\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n    for (let i = 0; i <= 6; i++) {\n      paginationBtns[i].classList.remove('pag-btns__btn--is-hidden');\n    }\n    paginationBtns[6].textContent = totalPages;\n  }\n\n  //  funkcjonalność do zmiany numerów strony\n\n  if (pageNumber === 1 && totalPages !== 1) {\n    prevBtn.disabled = true;\n  } else if (pageNumber === totalPages && totalPages !== 1) {\n    nextBtn.disabled = true;\n  }\n};\n\n// obsługa zapytania o najpopularniejsze filmy\nconst loadPopularMovies = event => {\n  gallery.innerHTML = ``;\n\n  fetchVideoPopular()\n    .then(data => {\n      console.log(data);\n      const dataArray = data.results;\n      // console.log(dataArray);\n      renderVideoCard(dataArray);\n    })\n    .catch(error => {\n      console.error(error);\n    });\n};\n\n// obsługa zapytania o film dopasowany do wartości wpisanej do input\nconst searchVideo = async event => {\n  event.preventDefault();\n\n  pageNumber = 1;\n\n  const {\n    elements: { searchQuery },\n  } = form;\n  const formSearch = searchQuery.value;\n  // console.log(formSearch);\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      console.log(data);\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\n// obsługa paginacji\nconst nextPage = async () => {\n  const {\n    elements: { searchQuery },\n  } = form;\n\n  const formSearch = searchQuery.value;\n  console.log(formSearch);\n\n  pageNumber++;\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n\n      console.log(`Wczytana strona: ${pageNumber}`);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\nconst prevPage = async () => {\n  const {\n    elements: { searchQuery },\n  } = form;\n\n  const formSearch = searchQuery.value;\n  console.log(formSearch);\n\n  pageNumber--;\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n      console.log(`Wczytana strona: ${pageNumber}`);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\nconst pageByNumber = async event => {\n  const target = event.target.closest('.pag-btns__btn');\n  if (!event.target.closest('.pag-btns__btn')) {\n    return;\n  }\n\n  pageNumber = Number(target.textContent);\n  console.log(typeof pageNumber);\n\n  const {\n    elements: { searchQuery },\n  } = form;\n\n  const formSearch = searchQuery.value;\n  console.log(formSearch);\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n      console.log(`Wczytana strona: ${pageNumber}`);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\n// tworzenie siatki popularnych filmów przy załadowaniu strony\nwindow.onload = loadPopularMovies;\n\n// tworzenie siatki filmów odpowiadających wartości input\nform.addEventListener('submit', searchVideo);\n\n// otwieranie modala ze szczegółami o filmie\nconst getDetails = event => {\n  const target = event.target.closest('.home-gallery__card');\n  if (!event.target.closest('.home-gallery__card')) {\n    return;\n  }\n\n  const movieId = target.getAttribute('movieid');\n\n  fetchDetails(movieId)\n    .then(data => {\n      console.log(data);\n      renderModal(data);\n    })\n    .catch(error => {\n      console.error(error);\n    });\n};\n\n// obsługa funkcjonalności na stronie\ndocument.addEventListener('click', getDetails);\nnextBtn.addEventListener('click', nextPage);\nprevBtn.addEventListener('click', prevPage);\ndocument.addEventListener('click', pageByNumber);\n"],"names":["$3ZRvh","parcelRequire","$caed632eb6ae278a$var$form","document","querySelector","$caed632eb6ae278a$var$gallery","$caed632eb6ae278a$var$paginationBtns","querySelectorAll","$caed632eb6ae278a$var$nextBtn","$caed632eb6ae278a$var$prevBtn","$caed632eb6ae278a$var$dots","$caed632eb6ae278a$var$pageNumber","console","log","$caed632eb6ae278a$var$renderVideoCard","videoArray","fetchGenres","then","genresList","map","video","movieYear","release_date","split","arrGenreId","genre_ids","arrVideoGenres","id","genreObj","genres","find","genre","push","arrGenres","name","join","card","createElement","classList","add","setAttribute","innerHTML","poster_path","title","appendChild","catch","err","error","$caed632eb6ae278a$var$checkResult","totalResults","totalPages","Math","ceil","i","disabled","forEach","btn","Number","textContent","style","backgroundColor","remove","window","onload","event","fetchVideoPopular","data","dataArray","results","addEventListener","async","preventDefault","elements","searchQuery","formSearch","value","fetchVideo","total_results","target","closest","movieId","getAttribute","fetchDetails","$3wwqR","renderModal"],"version":3,"file":"index.7d5a2b97.js.map"}