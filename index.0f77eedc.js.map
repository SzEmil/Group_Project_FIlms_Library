{"mappings":"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","sources":["src/js/home-library.js"],"sourcesContent":["'use strict';\nimport { fetchVideo } from './fetch-video';\nimport { fetchVideoPopular } from './fetch-video';\nimport { fetchDetails } from './fetch-video';\nimport { fetchGenres } from './fetch-video';\nimport { renderModal } from './more-info-modal';\n\n// const form = document.querySelector('#search-form');\nconst form = document.querySelector('#header-search-form');\nconst gallery = document.querySelector('.home-gallery');\nconst paginationBtns = document.querySelectorAll('.pag-btns__btn');\nconst nextBtn = document.querySelector('.pag-btns__arrow--next');\nconst prevBtn = document.querySelector('.pag-btns__arrow--prev');\nconst dots = document.querySelectorAll('.pag-btns__dots');\nlet pageNumber = 1;\n\nconsole.log(paginationBtns);\nconsole.log(typeof paginationBtns);\n\n// funkcja do wyświetlania wyszukanych filmów\nconst renderVideoCard = videoArray => {\n  fetchGenres()\n    .then(genresList => {\n      videoArray.map(video => {\n        const releaseDate = video.release_date;\n        const movieYear = releaseDate.split('-');\n\n        const arrGenreId = video.genre_ids;\n        const arrVideoGenres = [];\n        arrGenreId.map(id => {\n          const genreObj = genresList.genres.find(genre => genre.id === id);\n          arrVideoGenres.push(genreObj);\n        });\n        const arrGenres = [];\n        arrVideoGenres.map(genre => {\n          arrGenres.push(genre.name);\n        });\n        const genres = arrGenres.join(', ');\n\n        const card = document.createElement('div');\n        card.innerHTML = `<div class = \"home-gallery__card\" movieid=\"${video.id}\"><img class=\"home-gallery__img\" src=\"https://image.tmdb.org/t/p/w300${video.poster_path}\" alt =\"video poster\"><h3 class= \"home-gallery-title\">${video.title}</h3><p class = \"home-gallery-link\">${genres} | ${movieYear[0]}</p></div>`;\n\n        gallery.appendChild(card);\n      });\n    })\n    .catch(err => {\n      console.error(err);\n    });\n};\n\n// funkcja sprawdzająca ilość wyszukanych elementów oraz stron i obsługująca widoczność przycisków do przewijania stron\nconst checkResult = totalResults => {\n  const totalPages = Math.ceil(totalResults / 20);\n\n  for (let i = 0; i <= 6; i++) {\n    paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n  }\n  nextBtn.classList.add('pag-btns__arrow--is-hidden');\n  prevBtn.classList.add('pag-btns__arrow--is-hidden');\n  dots[0].classList.add('pag-btns__dots--is-hidden');\n  dots[1].classList.add('pag-btns__dots--is-hidden');\n\n  nextBtn.disabled = false;\n  prevBtn.disabled = false;\n\n  if (totalResults === 0) {\n    // tutaj usuwam klase is-hidden w komentarzu wrzuconym do hedera przez Olgę, że nie znaleziono filmów\n    return;\n  }\n\n  paginationBtns.forEach(btn => {\n    if (Number(btn.textContent) !== pageNumber) {\n      // btn.classList.remove('.pag-btns__btn--active');\n      btn.style.backgroundColor = 'transparent';\n      console.log('remove');\n    }\n    if (Number(btn.textContent) === pageNumber) {\n      // btn.classList.add('.pag-btns__btn--active');\n      btn.style.backgroundColor = 'orange';\n      console.log('add');\n    }\n  });\n\n  if (totalPages === 1) {\n    paginationBtns[0].classList.remove('pag-btns__btn--is-hidden');\n    paginationBtns[0].disabled = true;\n    // tutaj można jeszcze usunąć cursor pointer\n  } else if (totalPages === 2) {\n    paginationBtns[0].classList.remove('pag-btns__btn--is-hidden');\n    paginationBtns[1].classList.remove('pag-btns__btn--is-hidden');\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 3) {\n    for (let i = 0; i <= 2; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 4) {\n    for (let i = 0; i <= 3; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 5) {\n    for (let i = 0; i <= 4; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 6) {\n    for (let i = 0; i <= 5; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages === 7) {\n    for (let i = 0; i <= 6; i++) {\n      paginationBtns[i].classList.add('pag-btns__btn--is-hidden');\n    }\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n  } else if (totalPages > 7) {\n    dots[0].classList.remove('pag-btns__dots--is-hidden');\n    dots[1].classList.remove('pag-btns__dots--is-hidden');\n    nextBtn.classList.remove('pag-btns__arrow--is-hidden');\n    prevBtn.classList.remove('pag-btns__arrow--is-hidden');\n    for (let i = 0; i <= 6; i++) {\n      paginationBtns[i].classList.remove('pag-btns__btn--is-hidden');\n    }\n    paginationBtns[6].textContent = totalPages;\n  }\n\n  //  funkcjonalność do zmiany numerów strony\n\n  if (pageNumber === 1 && totalPages !== 1) {\n    prevBtn.disabled = true;\n  } else if (pageNumber === totalPages && totalPages !== 1) {\n    nextBtn.disabled = true;\n  }\n};\n\n// obsługa zapytania o najpopularniejsze filmy\nconst loadPopularMovies = event => {\n  gallery.innerHTML = ``;\n\n  fetchVideoPopular()\n    .then(data => {\n      console.log(data);\n      const dataArray = data.results;\n      // console.log(dataArray);\n      renderVideoCard(dataArray);\n    })\n    .catch(error => {\n      console.error(error);\n    });\n};\n\n// obsługa zapytania o film dopasowany do wartości wpisanej do input\nconst searchVideo = async event => {\n  event.preventDefault();\n\n  pageNumber = 1;\n\n  const {\n    elements: { searchQuery },\n  } = form;\n  const formSearch = searchQuery.value;\n  // console.log(formSearch);\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      console.log(data);\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\n// obsługa paginacji\nconst nextPage = async () => {\n  const {\n    elements: { searchQuery },\n  } = form;\n\n  const formSearch = searchQuery.value;\n  console.log(formSearch);\n\n  pageNumber++;\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n\n      console.log(`Wczytana strona: ${pageNumber}`);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\nconst prevPage = async () => {\n  const {\n    elements: { searchQuery },\n  } = form;\n\n  const formSearch = searchQuery.value;\n  console.log(formSearch);\n\n  pageNumber--;\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n      console.log(`Wczytana strona: ${pageNumber}`);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\nconst pageByNumber = async event => {\n  const target = event.target.closest('.pag-btns__btn');\n  if (!event.target.closest('.pag-btns__btn')) {\n    return;\n  }\n\n  pageNumber = Number(target.textContent);\n  console.log(typeof pageNumber);\n\n  const {\n    elements: { searchQuery },\n  } = form;\n\n  const formSearch = searchQuery.value;\n  console.log(formSearch);\n\n  await fetchVideo(formSearch, pageNumber)\n    .then(data => {\n      gallery.innerHTML = ``;\n      const dataArray = data.results;\n      console.log(dataArray);\n      renderVideoCard(dataArray);\n      const totalResults = data.total_results;\n      checkResult(totalResults);\n      console.log(`Wczytana strona: ${pageNumber}`);\n    })\n    .catch(error => {\n      gallery.innerHTML = ``;\n      console.error(error);\n    });\n};\n\n// tworzenie siatki popularnych filmów przy załadowaniu strony\nwindow.onload = loadPopularMovies;\n\n// tworzenie siatki filmów odpowiadających wartości input\nform.addEventListener('submit', searchVideo);\n\n// otwieranie modala ze szczegółami o filmie\nconst getDetails = event => {\n  const target = event.target.closest('.home-gallery__card');\n  if (!event.target.closest('.home-gallery__card')) {\n    return;\n  }\n\n  const movieId = target.getAttribute('movieid');\n\n  fetchDetails(movieId)\n    .then(data => {\n      console.log(data);\n      renderModal(data);\n    })\n    .catch(error => {\n      console.error(error);\n    });\n};\n\n// obsługa funkcjonalności na stronie\ndocument.addEventListener('click', getDetails);\nnextBtn.addEventListener('click', nextPage);\nprevBtn.addEventListener('click', prevPage);\ndocument.addEventListener('click', pageByNumber);\n"],"names":["$3ZRvh","parcelRequire","$caed632eb6ae278a$var$form","document","querySelector","$caed632eb6ae278a$var$gallery","$caed632eb6ae278a$var$paginationBtns","querySelectorAll","$caed632eb6ae278a$var$nextBtn","$caed632eb6ae278a$var$prevBtn","$caed632eb6ae278a$var$dots","$caed632eb6ae278a$var$pageNumber","console","log","$caed632eb6ae278a$var$renderVideoCard","videoArray","fetchGenres","then","genresList","map","video","movieYear","release_date","split","arrGenreId","genre_ids","arrVideoGenres","id","genreObj","genres","find","genre","push","arrGenres","name","join","card","createElement","innerHTML","poster_path","title","appendChild","catch","err","error","$caed632eb6ae278a$var$checkResult","totalResults","totalPages","Math","ceil","i","classList","add","disabled","forEach","btn","Number","textContent","style","backgroundColor","remove","window","onload","event","fetchVideoPopular","data","dataArray","results","addEventListener","async","preventDefault","elements","searchQuery","formSearch","value","fetchVideo","total_results","target","closest","movieId","getAttribute","fetchDetails","$3wwqR","renderModal"],"version":3,"file":"index.0f77eedc.js.map"}